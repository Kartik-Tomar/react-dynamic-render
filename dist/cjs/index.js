"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-dom/server");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e),o=r(t);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={elements:["style","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","ol","optgroup","option","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","small","source","span","strong","sub","summary","sup","svg","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],attributes:["style","accept","accept-charset","accesskey","alt","autocapitalize","autocomplete","autofocus","autoplay","buffered","capture","charset","checked","class","cols","colspan","controls","coords","crossorigin","datetime","decoding","default","dir","dirname","disabled","download","draggable","enctype","enterkeyhint","for","form","formenctype","formmethod","formnovalidate","formtarget","headers","height","hidden","high","href","hreflang","id","inert","inputmode","ismap","itemid","itemprop","itemref","itemscope","itemtype","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","nomodule","novalidate","open","optimum","part","pattern","placeholder","playsinline","preload","readonly","referrerpolicy","rel","required","reversed","rows","rowspan","sandbox","scope","selected","shape","size","sizes","slot","span","src","srclang","srcset","start","step","tabindex","target","title","translate","type","usemap","value","virtualkeyboardpolicy","width","wrap","className","htmlFor","children","cssText"]},s=function(e){if("string"!=typeof e)return"";return e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\/\*[\s\S]*?\*\//g,"")).replace(/\\/g,"\\\\").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")).replace(/@import\s*[^;]+;/gi,"")).replace(/@charset\s*[^;]+;/gi,"")).replace(/expression\s*\(.*\)/gi,"")).replace(/(\/\*)[\s\S]*(\*\/)/gi,"")).replace(/behavior\s*:/gi,"")).replace(/-moz-binding\s*:/gi,"")).replace(/url\s*\(\s*["']?(.*?)["']?\s*\)/gi,(function(e,t){var r=t.substring(0,t.indexOf(":")+1).toLowerCase();return["http:","https:","data:"].includes(r)?'url("'.concat(t,'")'):""}))};function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){var t=e.htmlJson,r=e.customComponents;try{if(!t)return null;if("string"!=typeof t){var o=t.type,l=t.props;if(-1===i.elements.indexOf(o))return console.error("Unsafe HTML element detected: ".concat(o)),null;var c=i.attributes;for(var u in l)c.includes(u)||(console.error("Unsafe HTML attribute detected: ".concat(u,'="').concat(l[u],'"')),delete l[u]);if("style"===o){var f=s(l.cssText);return n.default.createElement("style",null,f)}return n.default.createElement(o,p(p({},l),{},{key:Math.random()}),Array.isArray(l.children)?l.children.map((function(e,t){return n.default.createElement(m,{key:t,htmlJson:e,customComponents:r})})):"object"===a(l.children)&&null!==l.children?n.default.createElement(m,{htmlJson:l.children,customComponents:r}):l.children)}try{var d=JSON.parse(t);return d&&d.component&&r[d.component]?n.default.createElement(r[null==d?void 0:d.component],p({},d.props)):(console.error("Invalid component data or component not found"),t)}catch(e){return t}}catch(e){return console.error(e),null}};function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,l,c=[],i=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){if(null!=e&&e.tagName&&!i.elements.includes(e.tagName.toLowerCase()))return console.error("Unsafe HTML element detected: ".concat(e.tagName.toLowerCase())),null;if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){if("style"===e.tagName.toLowerCase())return{type:e.tagName.toLowerCase(),props:{cssText:s(e.textContent)}};for(var t=Array.from(e.childNodes).map(h),r={},n=0;n<e.attributes.length;n++){var o=e.attributes[n];if(i.attributes.includes(o.name)){var a=o.name.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));"style"===a?r[a]=s(o.value).split(";").filter((function(e){return e.trim()})).reduce((function(e,t){var r=d(t.split(/:(.+)/).map((function(e){return e.trim()})),2),n=r[0],o=r[1];if(!n||!o)return e;var a=n.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));return o.startsWith("url(")||isNaN(o)&&(o='"'.concat(o,'"')),e[a]=o,e}),{}):"class"===a?r.className=o.value:"for"===a?r.htmlFor=o.value:r[a]=o.value}else console.error("Unsafe HTML attribute detected: ".concat(o.name,'="').concat(o.value,'"'))}return{type:e.tagName.toLowerCase(),props:b(b({},r),{},{children:t.length>0?t:null})}}return null},g=function(e){var t=e.htmlString;try{if("string"!=typeof t)return console.error("Invalid input: htmlString must be a string."),null;if(""===t.trim())return null;var r=new DOMParser,n=function(e){return e.replace(/>\s+</g,"><").replace(/(\s)+/g," ").trim()}(t),o=r.parseFromString(n,"text/html");return o.querySelector("parsererror")?(console.error("HTML Parsing Error:",o.querySelector("parsererror")),null):h(o.body.firstChild)}catch(e){return console.error(e),null}};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){var t=e.htmlString,r=e.htmlJson,o=e.customComponents;try{if(t){var l=g({htmlString:t});return n.default.createElement(j,{htmlJson:l,customComponents:o})}if(!r)return null;if("string"!=typeof r){var c=r.type,i=r.props;if("style"===c){var s=i.cssText;return n.default.createElement("style",null,s)}return n.default.createElement(c,O(O({},i),{},{key:Math.random()}),Array.isArray(i.children)?i.children.map((function(e,t){return n.default.createElement(j,{key:t,htmlJson:e,customComponents:o})})):"object"===a(i.children)&&null!==i.children?n.default.createElement(j,{htmlJson:i.children,customComponents:o}):i.children)}try{var u=JSON.parse(r);return u&&u.component&&o[u.component]?n.default.createElement(o[null==u?void 0:u.component],O({},u.props)):(console.error("Invalid component data or component not found"),r)}catch(e){return r}}catch(e){return console.error(e),null}};exports.DynamicRender=j,exports.DynamicRenderJson=m,exports.htmlReactParser=g,exports.vNodeToHtmlString=function(e){var t=e.htmlJson,r=e.customComponents;return o.default.renderToString(n.default.createElement(m,{htmlJson:t,customComponents:r}))};
//# sourceMappingURL=index.js.map
