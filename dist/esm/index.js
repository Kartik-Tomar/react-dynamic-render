import e from"react";import t from"react-dom/server";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={elements:["style","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","ol","optgroup","option","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","small","source","span","strong","sub","summary","sup","svg","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],attributes:["style","accept","accept-charset","accesskey","alt","autocapitalize","autocomplete","autofocus","autoplay","buffered","capture","charset","checked","class","cols","colspan","controls","coords","crossorigin","datetime","decoding","default","dir","dirname","disabled","download","draggable","enctype","enterkeyhint","for","form","formenctype","formmethod","formnovalidate","formtarget","headers","height","hidden","high","href","hreflang","id","inert","inputmode","ismap","itemid","itemprop","itemref","itemscope","itemtype","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","nomodule","novalidate","open","optimum","part","pattern","placeholder","playsinline","preload","readonly","referrerpolicy","rel","required","reversed","rows","rowspan","sandbox","scope","selected","shape","size","sizes","slot","span","src","srclang","srcset","start","step","tabindex","target","title","translate","type","usemap","value","virtualkeyboardpolicy","width","wrap","className","htmlFor","children","cssText"]},l=function(e){if("string"!=typeof e)return"";return e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\/\*[\s\S]*?\*\//g,"")).replace(/\\/g,"\\\\").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")).replace(/@import\s*[^;]+;/gi,"")).replace(/@charset\s*[^;]+;/gi,"")).replace(/expression\s*\(.*\)/gi,"")).replace(/(\/\*)[\s\S]*(\*\/)/gi,"")).replace(/behavior\s*:/gi,"")).replace(/-moz-binding\s*:/gi,"")).replace(/url\s*\(\s*["']?(.*?)["']?\s*\)/gi,(function(e,t){var r=t.substring(0,t.indexOf(":")+1).toLowerCase();return["http:","https:","data:"].includes(r)?'url("'.concat(t,'")'):""}))};function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(t){var n=t.htmlJson,o=t.customComponents;try{if(!n)return null;if("string"!=typeof n){var c=n.type,u=n.props;if(-1===a.elements.indexOf(c))return console.error("Unsafe HTML element detected: ".concat(c)),null;var p=a.attributes;for(var m in u)p.includes(m)||(console.error("Unsafe HTML attribute detected: ".concat(m,'="').concat(u[m],'"')),delete u[m]);if("style"===c){var f=l(u.cssText);return e.createElement("style",null,f)}return e.createElement(c,i(i({},u),{},{key:Math.random()}),Array.isArray(u.children)?u.children.map((function(t,r){return e.createElement(s,{key:r,htmlJson:t,customComponents:o})})):"object"===r(u.children)&&null!==u.children?e.createElement(s,{htmlJson:u.children,customComponents:o}):u.children)}try{var d=JSON.parse(n);return d&&d.component&&o[d.component]?e.createElement(o[null==d?void 0:d.component],i({},d.props)):(console.error("Invalid component data or component not found"),n)}catch(e){return n}}catch(e){return console.error(e),null}};function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,l,c=[],i=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(e){if(null!=e&&e.tagName&&!a.elements.includes(e.tagName.toLowerCase()))return console.error("Unsafe HTML element detected: ".concat(e.tagName.toLowerCase())),null;if(e.nodeType===Node.TEXT_NODE)return e.textContent;if(e.nodeType===Node.ELEMENT_NODE){if("style"===e.tagName.toLowerCase())return{type:e.tagName.toLowerCase(),props:{cssText:l(e.textContent)}};for(var t=Array.from(e.childNodes).map(d),r={},n=0;n<e.attributes.length;n++){var o=e.attributes[n];if(a.attributes.includes(o.name)){var c=o.name.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));"style"===c?r[c]=l(o.value).split(";").filter((function(e){return e.trim()})).reduce((function(e,t){var r=p(t.split(/:(.+)/).map((function(e){return e.trim()})),2),n=r[0],o=r[1];if(!n||!o)return e;var a=n.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));return o.startsWith("url(")||isNaN(o)&&(o='"'.concat(o,'"')),e[a]=o,e}),{}):"class"===c?r.className=o.value:"for"===c?r.htmlFor=o.value:r[c]=o.value}else console.error("Unsafe HTML attribute detected: ".concat(o.name,'="').concat(o.value,'"'))}return{type:e.tagName.toLowerCase(),props:f(f({},r),{},{children:t.length>0?t:null})}}return null},y=function(e){var t=e.htmlString;try{if("string"!=typeof t)return console.error("Invalid input: htmlString must be a string."),null;if(""===t.trim())return null;var r=new DOMParser,n=function(e){return e.replace(/>\s+</g,"><").replace(/(\s)+/g," ").trim()}(t),o=r.parseFromString(n,"text/html");return o.querySelector("parsererror")?(console.error("HTML Parsing Error:",o.querySelector("parsererror")),null):d(o.body.firstChild)}catch(e){return console.error(e),null}};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(t){var n=t.htmlString,o=t.htmlJson,a=t.customComponents;try{if(n){var l=y({htmlString:n});return e.createElement(g,{htmlJson:l,customComponents:a})}if(!o)return null;if("string"!=typeof o){var c=o.type,i=o.props;if("style"===c){var s=i.cssText;return e.createElement("style",null,s)}return e.createElement(c,h(h({},i),{},{key:Math.random()}),Array.isArray(i.children)?i.children.map((function(t,r){return e.createElement(g,{key:r,htmlJson:t,customComponents:a})})):"object"===r(i.children)&&null!==i.children?e.createElement(g,{htmlJson:i.children,customComponents:a}):i.children)}try{var u=JSON.parse(o);return u&&u.component&&a[u.component]?e.createElement(a[null==u?void 0:u.component],h({},u.props)):(console.error("Invalid component data or component not found"),o)}catch(e){return o}}catch(e){return console.error(e),null}},v=function(r){var n=r.htmlJson,o=r.customComponents;return t.renderToString(e.createElement(s,{htmlJson:n,customComponents:o}))};export{g as DynamicRender,s as DynamicRenderJson,y as htmlReactParser,v as vNodeToHtmlString};
//# sourceMappingURL=index.js.map
